//
// Generated by NVIDIA NVVM Compiler
//
// Compiler Build ID: CL-30033411
// Cuda compilation tools, release 11.4, V11.4.48
// Based on NVVM 7.0.1
//

.version 7.4
.target sm_52
.address_size 64

	// .globl	_Z14LockTestKernelv
.global .attribute(.managed) .align 4 .u32 x;
.global .align 4 .u32 lock;

.visible .entry _Z14LockTestKernelv()
{
	.reg .pred 	%p<4>;
	.reg .b32 	%r<7>;
	.reg .b64 	%rd<2>;


	mov.u32 	%r1, 1;
	mov.u32 	%r2, 0;
	mov.u64 	%rd1, lock;

$L__BB0_1:
	atom.global.cas.b32 	%r3, [%rd1], %r2, %r1;
	setp.eq.s32 	%p1, %r3, 0;
	setp.ne.s32 	%p2, %r3, 0;
	@%p2 bra 	$L__BB0_3;

	ld.global.u32 	%r4, [x];
	add.s32 	%r5, %r4, 1;
	st.global.u32 	[x], %r5;
	st.global.u32 	[lock], %r2;

$L__BB0_3:
	not.pred 	%p3, %p1;
	@%p3 bra 	$L__BB0_1;

	ret;

}

